			OPENDMARC RELEASE NOTES

This listing shows the versions of the OpenDMARC package, the date of
release, and a summary of the changes in that release.

1.0.0		2012/10/21
	Feature request #26: Don't overload "AuthservID"; instead, the list
		of trusted authserv-ids is now specified by a
		new "TrustedAuthservIDs" setting.  Requested by Andreas Schulze.
	Feature request #28: Add "CopyFailuresTo" which adds the specified
		recipient to the message when DMARC failures occur.
		Requested by Andreas Schulze.
	Feature request #30: Improve logging by indicating what the return
		path was when a parse failure occurred, and what the final
		DMARC result was.  Requested by Andreas Schulze.
	REPORTING: Feature request #27: Add "--nodomain" to opendmarc-reports
		to skip report generation for specific domains.

0.2.2		2012/09/14
	Fix bug #25: Use locks to co-ordinate between the filter writing
		to the history file and opendmarc-import consuming it.
		Problem noted by Marcos Vieira.
	Don't use dmarcf_dstring_printf() where dmarcf_dstring_cat() suffices.
	Add Authentication-Results fields honouring AuthservIDWithJobID.
		Problem noted by Andreas Schulze.
	Improve logic that identifies usable Authentication-Results fields.
		Problem noted by Andreas Schulze.
	REPORTING: Handle multiple "rua" values in both reporting scripts.
		Problem noted by Andreas Schulze.
	REPORTING: Get the date range right on reports.  Problem noted by
		Todd Lyons and Andreas Schulze.

0.2.1		2012/08/31
	Don't crash during shutdown by accessing freed memory.  Problem
		reported by Todd Lyons.
	Update the command line usage message, which was terribly outdated.
	Fix handling of an SPF pass when the envelope doesn't contain a
		usable domain name.
	Fix a crash problem having to do with default authserv-ids.
	Fix an off-by-one string length comparison error when checking for
		relevant authentication results.

0.2.0		2012/08/24
	Feature request #15: If there's no SPF Authentication-Results field,
		look for a Received-SPF field to get SPF results.
	Feature request #16: Add "RecordAllMessages" setting to record all
		messages (the previous default).  The new default is to record
		only those messages whose From: domains had a published
		DMARC record.
	Feature request #19: Add "IgnoreMailFrom" setting, allowing mail from
		specific domains to be ignored.
	Feature request #20: Allow "AuthservID" to be a comma-separated list
		of authserv-ids to trust as local.  The first one is used
		in header field generation.  Suggested by Andreas Schulze.
	Fix bug #18: Pass the absence of a "rua" field in a DMARC record
		to the history file and into the "requests" table.
	Prevent crashes when parsing horribly malformed From: fields.
		Problem noted by Todd Lyons.
	Don't apply a default IgnoreHosts list in test mode.  Problem noted
		by Marcos Vieira.
	Don't expire request records for stuff that's never been generated
		yet.  Problem noted by Todd Lyons.
	Register the filter with SMFIF_ADDHDRS not SMFIF_CHGHDRS.  Problem
		noted by Todd Lyons.
	Fix bounds checking in dmarcf_dstring_printf().  Problem noted by
		Marcos Vieira.
	Arrays created in-place from strings don't need to have their elements
		freed.  Problem noted by Andreas Schulze.
	BUILD: Install non-user scripts under sbin instead of bin.  Problem
		noted by Andreas Schulze.
	CONTRIB: Add contrib/init/redhat and contents.  Provided by Todd Lyons.
	CONTRIB: Add contrib/spec and contents.  Provided by Todd Lyons.
	DB: Add some indexes to optimize operations.  Suggested by Todd Lyons.
	LIBOPENDMARC: Fix bug #22: Minimal solution to alignment checks when
		no public suffix list is provided.  Problem noted by
		Todd Lyons.
	REPORTING: Feature request #17: Add "opendmarc-params" tool, and
		tie it to opendmarc-import, so that administrators can force
		reports for specific domains to go to specific destinations
		regardless of DMARC record contents.
	REPORTING: Feature request #21: Add "--test" and "--keepfiles" options
		to opendmarc-reports.  Patch from Todd Lyons.
	REPORTING: Add opendmarc-importstats.
	REPORTING: Variable verbose levels in opendmarc-report.  Patch from
		Todd Lyons.
	TOOLS: Feature request #14: Add "openmarc-check" command line tool for
		translating DMARC records found in the DNS.

0.1.8		2012/07/30
	Fix Linux build issue.
	REPORTING: Patch #13: Have report generation use SMTP directly.
		Patch from Andreas Schulze.

0.1.7		2012/07/26
	Fix bug #5: Add "IgnoreHosts" setting.
	Fix bug #9: Honour "pct" setting (or its default).
	REPORTING: Fix bug #6: Add opendmarc-expire script.
	LIBOPENDMARC: Fix bug #7: Chase down CNAMEs if the resolver doesn't
		do it for you.  Problem noted by Tim Draegen.
	LIBOPENDMARC: Fix bug #10: When DKIM is in alignment, don't
		short-circuit past SPF alignment tests.  Problem noted by
		Mike Adkins and Steve Jones.
	LIBOPENDMARC: Fix bug #12: Fix a false positive alignment problem
		in the "relaxed" case.
	CONTRIB: Add a start/stop script.  Contributed by Steve Mays.

0.1.6		2012/07/20
	Don't report false passes for SPF.  Problem noted by Tim Draegen.
	When opendmarc_policy_query_dmarc() fails, log the domain that was
		being checked.
	LIBOPENDMARC: Return DMARC_POLICY_NONE from
		opendmarc_get_policy_to_enforce() when "p=none" was found.
		DMARC_POLICY_PASS is only returned if alignment was discovered.
	REPORTING: Bug #4: Use report begin/end times based on message
		timestamps rather than last report's time/current time.
		Reported by Julian Mehnle.

0.1.5		2012/07/19
	Add "Auth-Failure" field to forensic reports.
	LIBOPENDMARC: Fix a bug in "ri" parsing.

0.1.4		2012/07/15
	LIBOPENDMARC: Fix a bug in dmarc_dns_get_record().  Reported by
		Andreas Schulze.
	LIBOPENDMARC: Fix library build for C++ compilers.  Reported by
		Andrew Birchall.
	DB: Delete domains.lastsent, as it is unused.
	REPORTING: Fix column name error in opendmarc-reports.  Reported
		by Andreas Schulze.
	REPORTING: Fix generated aggregate report header.  Patch by
		Andreas Schulze.
	REPORTING: Call setlocale() in opendmarc-reports.  Requested by
		Andreas Schulze.
	CONTRIB: Pull down a new version of rddmarc.  From John Levine.

0.1.3		2012/07/14
	Fix up the MIME syntax in AFRF reports.  Patch from Andreas Schulze.
    	Fix bug #2: Remove dmarcf_dkim_select(); logic has been moved into
		libopendmarc.
	Fix Authentication-Results field syntax.
	Don't generate an AFRF report on other than "reject" and "quarantine"
		results.
	Fix a test mode crash condition, and initialize a few minor things
		before entering test mode so AFRFs come out cleaner.
    	Add "ReportCommand" to the valid configuration file item list.
	Ignore "header.i" when parsing DKIM authentication results.  We only
		care about "header.d".
	Check for return status of opendmarc_policy_query_dmarc() and do
		the right thing with it.
	BUILD: Include the "db" directory.
	REPORTING: Fix bug #3: Drop XML::Generator and do it by hand, since we
		need to generate the array of DKIM signature data (there can
		be more than one) as a sub-query.
	LIBOPENDMARC: If the From: domain didn't have a DMARC policy and
		there's no Organizational Domain available, return the
		correct result code.

0.1.2		2012/07/11
	LIBOPENDMARC: Use strlcat()/strlcpy().
	BUILD: Add -lresolv where needed in more places (libopendmarc unit
		tests this time).  Problem noted by Andreas Schulze.
	BUILD: Split filter checks and live library checks into different
		"--enable" flags.  Problem noted by Andreas Schulze.
	BUILD: Actually do something with "--disable-filter".  Problem
		noted by Andrew Birchall.

0.1.1		2012/07/10
	LIBOPENDMARC: Add strlcat() and strlcpy() if not provided in libc.
		Problem noted by Andreas Schulze.
	REPORTS: Fix generated XML format ("auth_results" is a sibling of
		"row", not a child of it).  Reported by John Levine.
	BUILD: Add -lresolv where needed.  Problem noted by Andreas Schulze.
	BUILD: Clean up an errant "configure" line.  Problem noted by
		Andreas Schulze.

0.1.0		2012/07/09
	Initial Beta release.
